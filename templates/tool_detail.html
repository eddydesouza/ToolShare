<!DOCTYPE html>
<html>
<head>
  <title>{{ tool.name }} - Availability</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
</head>
<body class="container py-4">
  <h2>{{ tool.name }}</h2>
  <p>{{ tool.description }}</p>
  <p><strong>Category:</strong> {{ tool.category }}</p>
  <p><strong>Price:</strong> ${{ tool.daily_price }} per day</p>

  <div id="calendar" class="my-4"></div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      height: 500,
      events: [
        {% for d in dates %}
        {
            title: '{{ "Available" if d.is_available else "Unavailable" }}',
            start: '{{ d.date.isoformat() }}',
            allDay: true,
            color: '{{ "green" if d.is_available else "red" }}'
        },
        {% endfor %}
      ]
    });
    calendar.render();
  });
</script>
</body>
</html>
